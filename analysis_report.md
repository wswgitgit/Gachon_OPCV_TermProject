# [비속어 점검 프로그램] - 욕설 감지 기능 테스트 및 피드백 보고서

## 1. 테스트 개요
본 프로젝트는 음성 파일을 입력받아 STT(Speech-to-Text) 변환 → 텍스트 분석 → 시간대별 욕설 점수 집계 → 그래프 시각화의 전체 파이프라인을 구현하는 것을 목표로 한다. 이를 통해 음성 데이터 내 특정 시간대별 욕설 사용 빈도를 정량적으로 분석할 수 있다.

### 1.1. 대상 영상 정보
- **URL**: [https://www.youtube.com/watch?v=khT_BIS7l8A&list=LL&index=1](https://www.youtube.com/watch?v=khT_BIS7l8A&list=LL&index=1)
- **테스트 목적**: STT 결과와 실제 감지 점수 비교를 통한 프로그램의 정확도 검증 및 설정값 보완

### 1.2. 초기 설정값 (Config) 문제점 분석
- **초기 감지 점수**: 0분 대: 9점 / 1분 대: 143점 ()
- **문제점**: STT 결과(`쉬위발`, `개시핵길`, `병신`, `시발` 등)를 통해 영상 내 욕설 빈도가 높음을 확인했으나, 초기 점수가 예상보다 낮게 나옴. 이는 사람의 **억양이나 발음 속도에 따른 STT 변환 오류**로 인해 설정된 욕설 단어와 **변환된 텍스트가 불일치**했기 때문으로 분석됨.

## 2. STT 결과 기반 피드백 및 프로그램 개선 사항

### 2.1. STT 상세 결과 (발견된 욕설/비속어 예시)

STT 결과를 분석한 결과, 다음의 변형된 형태가 반복적으로 감지되었으며, 이로 인해 감지 점수가 누락되었음.

* `시발` -> `쉬위발`, `시발이네`, `시발이다`, `시발이야` 등
* `개새끼` -> `개시핵길`, `개시핵이`, `개시핵대` 등

### 2.2. Config 업데이트 내용 (개선 피드백)
- **조치**: STT 결과에서 확인된 **변형된 텍스트**(`쉬위발`, `개시핵길` 등)를 프로그램의 **욕설 감지 Config 파일에 추가**하여 감지 정확도를 높임.

### 2.3. 시스템 구성도
- STT 모듈 (run_stt)
  * Whisper 모델을 사용하여 음성 파일을 텍스트로 변환
  * 변환 결과의 segments를 반환 (시작 시간, 종료 시간, 텍스트 포함)
- 타임라인 모듈 (build_timeline, calc_timeline_scores)
  * TIME_SIZE(기본 60초) 단위로 텍스트를 묶어 타임라인 생성
  * 욕설 리스트(PENALTY)를 기반으로 각 문장의 점수를 계산
  * 시간대별 총 점수를 집계하여 딕셔너리 형태로 반환
- 시각화 모듈 (plot_timeline_scores)
  * 시간대별 욕설 점수를 막대 그래프로 출력
  * 결과 이미지를 지정된 경로(SAVE_PATH)에 저장
- 메인 실행부 (main)
  * 오디오 파일 존재 여부 확인
  * STT 변환 → 타임라인 생성 → 점수 계산 → 그래프 출력 순으로 실행
 
## 2.4. 시스템 구조
- 처리과정
  1. STT변환 -> 텍스트 추출  2. 타임라인 생성 (분 단위) 3. 욕설 점수 계산  4. 시각화 및 저장
- 출력: 시간대별 욕설 점수 그래프 
## 3. 개선된 프로그램의 최종 결과

Config 업데이트 후 프로그램을 재실행한 결과, 욕설 감지 점수가 다음과 같이 정확하게 반영되었음.

* **개선된 감지 점수**: 0분 대: 31점 / 1분 대: 155점 ()
    * 초기 9점에서 **31점**으로, 1분대의 143점에서 **155점**으로 점수가 상승하여 실제 영상 내용과 더 일치하는 결과를 보임.

---

## 4. 근본적인 한계 및 개선 방향

### 4.1. 현재 방식의 근본적 한계
현재 프로그램은 STT 엔진이 텍스트로 **변환한 결과**를 기반으로만 욕설을 감지하므로 다음과 같은 한계가 존재합니다.

* **음운 현상 반영의 어려움**: 한국어의 **연음**이나 **축약** 등으로 인해 단어가 뭉개지는 현상에 대한 대처가 수동적임. 매번 STT 변환 오류 형태를 Config에 **수동으로 추가**해야 하는 반복적인 작업이 필요.
* **억양 및 감정 반영 불가**: 텍스트 분석에만 의존하기 때문에, 비록 욕설 단어가 아니더라도 **특정 억양**이나 **높은 음조**에서 나오는 비난이나 분노와 같은 **발화자의 의도나 감정 상태**는 감지할 수 없음.

### 4.2. 향후 개선 방향(기회가 된다면...)
* **Config 자동 확장 연구**: 연음, 축약 등 한국어 음운 현상 및 오탈자를 자동으로 예측하여 감지. Config를 확장하는 알고리즘(예: 퍼지 매칭) 도입을 검토하여 수동 작업을 최소화.
* **음성 특징 분석 도입**: 장기적으로 **STT 텍스트 분석** 외에 음성의 **피치(Pitch)**, **속도**, **크기** 등 **음성 특징**을 함께 분석하여 발화자의 **감정 상태**와 **어조**를 고려하는 모델 도입.
